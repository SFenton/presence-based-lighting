2025-12-08 21:08:22,732 - custom_components.presence_based_lighting.config_flow - DEBUG - async_step_init called with user_input: {'presence_sensors': ['sensor.hallway_office_bedroom_presence_sensor_occupancy', 'sensor.hallway_office_bedroom_presence_sensor_pir', 'sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir'], 'clearing_sensors': ['sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir'], 'off_delay': 2}
2025-12-08 21:08:22,732 - custom_components.presence_based_lighting.config_flow - DEBUG - Processing user input, updating base_data
2025-12-08 21:08:22,732 - custom_components.presence_based_lighting.config_flow - DEBUG - Transitioning to manage_entities step. Current entities: 2
2025-12-08 21:08:25,921 - custom_components.presence_based_lighting.config_flow - DEBUG - Finalizing options update for 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,921 - custom_components.presence_based_lighting - INFO - Reloading Presence Based Lighting entry via HA: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,921 - custom_components.presence_based_lighting - INFO - Unloading Presence Based Lighting entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,921 - custom_components.presence_based_lighting - DEBUG - Stopping coordinator for entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,921 - custom_components.presence_based_lighting.interceptor - DEBUG - Cleaned up presence-lock interceptors for entry 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,921 - custom_components.presence_based_lighting - INFO - Coordinator stopped successfully, removed 3 listeners
2025-12-08 21:08:25,921 - custom_components.presence_based_lighting - DEBUG - Unloading platforms for entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - INFO - Successfully unloaded Presence Based Lighting entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - INFO - Setting up Presence Based Lighting entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - DEBUG - Creating coordinator for entry: 01KBJV3C3V13BEEEVMY267FKFV with data: {'clearing_sensors': ['sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir'], 'controlled_entities': [{'automation_mode': 'automatic', 'disable_on_external_control': True, 'entity_id': 'light.master_bedroom', 'initial_presence_allowed': True, 'manual_disable_states': ['off'], 'presence_cleared_service': 'turn_off', 'presence_cleared_state': 'off', 'presence_detected_service': 'turn_on', 'presence_detected_state': 'on', 'require_occupancy_for_detected': False, 'require_vacancy_for_cleared': False, 'respect_presence_allowed': True, 'rlc_tracking_entity': 'sensor.master_bedroom_lights', 'use_interceptor': True}, {'automation_mode': 'presence_lock', 'disable_on_external_control': False, 'entity_id': 'cover.master_bedroom_vents', 'initial_presence_allowed': True, 'manual_disable_states': [], 'presence_cleared_service': 'close_cover_tilt', 'presence_cleared_state': 'off', 'presence_detected_service': 'open_cover_tilt', 'presence_detected_state': 'on', 'require_occupancy_for_detected': True, 'require_vacancy_for_cleared': True, 'respect_presence_allowed': True, 'use_interceptor': True}], 'off_delay': 2, 'presence_sensor_mappings': {}, 'presence_sensors': ['sensor.hallway_office_bedroom_presence_sensor_occupancy', 'sensor.hallway_office_bedroom_presence_sensor_pir', 'sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir'], 'room_name': 'Master Bedroom'}
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - DEBUG - Initializing coordinator for entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - DEBUG - Processing 2 controlled entities
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - DEBUG - Configuring entity 0: light.master_bedroom with config: {'automation_mode': 'automatic', 'disable_on_external_control': True, 'entity_id': 'light.master_bedroom', 'initial_presence_allowed': True, 'manual_disable_states': ['off'], 'presence_cleared_service': 'turn_off', 'presence_cleared_state': 'off', 'presence_detected_service': 'turn_on', 'presence_detected_state': 'on', 'require_occupancy_for_detected': False, 'require_vacancy_for_cleared': False, 'respect_presence_allowed': True, 'rlc_tracking_entity': 'sensor.master_bedroom_lights', 'use_interceptor': True}
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - DEBUG - Configuring entity 1: cover.master_bedroom_vents with config: {'automation_mode': 'presence_lock', 'disable_on_external_control': False, 'entity_id': 'cover.master_bedroom_vents', 'initial_presence_allowed': True, 'manual_disable_states': [], 'presence_cleared_service': 'close_cover_tilt', 'presence_cleared_state': 'off', 'presence_detected_service': 'open_cover_tilt', 'presence_detected_state': 'on', 'require_occupancy_for_detected': True, 'require_vacancy_for_cleared': True, 'respect_presence_allowed': True, 'use_interceptor': True}
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - INFO - Coordinator initialized with 2 unique entities
2025-12-08 21:08:25,922 - custom_components.presence_based_lighting - DEBUG - Setting up platforms: ['switch']
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Starting coordinator for entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Starting coordinator for entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting.interceptor - DEBUG - hass-interceptor not available, skipping interceptor setup
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - hass-interceptor not installed, using fallback (reactive reversion)
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Setting up listeners for 2 controlled entities: ['light.master_bedroom', 'cover.master_bedroom_vents']
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Setting up listeners for 4 presence sensors: ['sensor.hallway_office_bedroom_presence_sensor_occupancy', 'sensor.hallway_office_bedroom_presence_sensor_pir', 'sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir']
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Setting up listeners for 2 clearing sensors: ['sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir']
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Registered state change listener for controlled entities
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Registered state change listener for presence/clearing sensors
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - DEBUG - Registered service call listener
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - INFO - Coordinator started successfully with 3 listeners
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - INFO - Successfully set up Presence Based Lighting entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:25,923 - custom_components.presence_based_lighting - INFO - Successfully reloaded Presence Based Lighting entry: 01KBJV3C3V13BEEEVMY267FKFV
2025-12-08 21:08:34,525 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: off -> on
2025-12-08 21:08:34,526 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:34,526 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.hallway
2025-12-08 21:08:34,526 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: off -> on
2025-12-08 21:08:34,526 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:34,526 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.office_light
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_pir previous_valid_state changed: off -> on
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,527 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,530 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.office_light
2025-12-08 21:08:34,530 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:34,530 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.office_light with delay 2 seconds
2025-12-08 21:08:34,531 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.hallway
2025-12-08 21:08:34,531 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:34,531 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.hallway with delay 0 seconds
2025-12-08 21:08:34,531 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.hallway, clearing sensors clear, applying cleared action
2025-12-08 21:08:34,531 - custom_components.presence_based_lighting - DEBUG - Entity light.hallway already in target state off
2025-12-08 21:08:34,965 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: off -> on
2025-12-08 21:08:34,966 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:34,966 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.hallway
2025-12-08 21:08:34,966 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: off -> on
2025-12-08 21:08:34,966 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:34,966 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.office_light
2025-12-08 21:08:34,967 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_occupancy previous_valid_state changed: off -> on
2025-12-08 21:08:34,967 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:34,967 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:08:34,967 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,967 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:34,968 - custom_components.presence_based_lighting - DEBUG - Off timer cancelled for light.office_light
2025-12-08 21:08:34,972 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.office_light
2025-12-08 21:08:34,972 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:34,972 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.office_light with delay 2 seconds
2025-12-08 21:08:34,972 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.hallway
2025-12-08 21:08:34,972 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:34,972 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.hallway with delay 0 seconds
2025-12-08 21:08:34,972 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.hallway, but clearing sensors not all clear
2025-12-08 21:08:35,297 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:08:35,297 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:35,297 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:08:36,972 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.office_light, but clearing sensors not all clear
2025-12-08 21:08:37,212 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:08:37,212 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:37,212 - custom_components.presence_based_lighting - DEBUG - Off timer cancelled for cover.master_bedroom_vents
2025-12-08 21:08:37,212 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:08:39,212 - custom_components.presence_based_lighting - DEBUG - Off timer expired for cover.master_bedroom_vents, clearing sensors clear, applying cleared action
2025-12-08 21:08:39,212 - custom_components.presence_based_lighting - DEBUG - Calling service cover.close_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:08:39,213 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,213 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,213 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,213 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,213 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,214 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,214 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,214 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,214 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,214 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:39,346 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:08:47,849 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_pir previous_valid_state changed: off -> on
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:47,850 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,082 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_occupancy previous_valid_state changed: off -> on
2025-12-08 21:08:48,082 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:08:48,082 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:08:48,082 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,082 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,082 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,082 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,083 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,083 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,083 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,083 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,083 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,083 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:08:48,225 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:08:48,226 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:48,226 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:08:49,992 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:08:49,992 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:08:49,992 - custom_components.presence_based_lighting - DEBUG - Off timer cancelled for cover.master_bedroom_vents
2025-12-08 21:08:49,992 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:08:51,993 - custom_components.presence_based_lighting - DEBUG - Off timer expired for cover.master_bedroom_vents, but clearing sensors not all clear
2025-12-08 21:08:52,221 - custom_components.presence_based_lighting - DEBUG - Manual action: light.master_bedroom targeting on (not in disable list), resuming automation
2025-12-08 21:08:52,221 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.master_bedroom
2025-12-08 21:08:52,224 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.master_bedroom
2025-12-08 21:08:52,335 - custom_components.presence_based_lighting - DEBUG - Using RLC tracking entity sensor.master_bedroom_lights for light.master_bedroom: effective state = on (raw state = on)
2025-12-08 21:08:52,336 - custom_components.presence_based_lighting - DEBUG - Manual control: light.master_bedroom set to on (not in disable list), resuming automation
2025-12-08 21:09:27,853 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_occupancy previous_valid_state changed: on -> off
2025-12-08 21:09:27,854 - custom_components.presence_based_lighting - DEBUG - Presence cleared, starting off timer
2025-12-08 21:09:27,854 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_pir previous_valid_state changed: on -> off
2025-12-08 21:09:27,855 - custom_components.presence_based_lighting - DEBUG - Presence cleared, starting off timer
2025-12-08 21:09:27,855 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.master_bedroom with delay 2 seconds
2025-12-08 21:09:27,855 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:09:29,855 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.master_bedroom, clearing sensors clear, applying cleared action
2025-12-08 21:09:29,855 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_off for entity light.master_bedroom
2025-12-08 21:09:29,856 - custom_components.presence_based_lighting - DEBUG - Off timer expired for cover.master_bedroom_vents, clearing sensors clear, applying cleared action
2025-12-08 21:09:29,857 - custom_components.presence_based_lighting - DEBUG - Calling service cover.close_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:09:29,857 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,857 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,857 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,858 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,858 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,858 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,858 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,858 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,858 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,858 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:09:29,860 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.master_bedroom
2025-12-08 21:09:30,024 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:09:34,523 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: on -> off
2025-12-08 21:09:34,524 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: on -> off
2025-12-08 21:09:34,524 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_pir previous_valid_state changed: on -> off
2025-12-08 21:09:34,944 - custom_components.presence_based_lighting.config_flow - DEBUG - OptionsFlow.__init__ starting
2025-12-08 21:09:34,944 - custom_components.presence_based_lighting.config_flow - DEBUG - Loading config_entry.data: {'clearing_sensors': ['sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir'], 'controlled_entities': [{'automation_mode': 'automatic', 'disable_on_external_control': True, 'entity_id': 'light.master_bedroom', 'initial_presence_allowed': True, 'manual_disable_states': ['off'], 'presence_cleared_service': 'turn_off', 'presence_cleared_state': 'off', 'presence_detected_service': 'turn_on', 'presence_detected_state': 'on', 'require_occupancy_for_detected': False, 'require_vacancy_for_cleared': False, 'respect_presence_allowed': True, 'rlc_tracking_entity': 'sensor.master_bedroom_lights', 'use_interceptor': True}, {'automation_mode': 'presence_lock', 'disable_on_external_control': False, 'entity_id': 'cover.master_bedroom_vents', 'initial_presence_allowed': True, 'manual_disable_states': [], 'presence_cleared_service': 'close_cover_tilt', 'presence_cleared_state': 'off', 'presence_detected_service': 'open_cover_tilt', 'presence_detected_state': 'on', 'require_occupancy_for_detected': True, 'require_vacancy_for_cleared': True, 'respect_presence_allowed': True, 'use_interceptor': True}], 'off_delay': 2, 'presence_sensor_mappings': {}, 'presence_sensors': ['sensor.hallway_office_bedroom_presence_sensor_occupancy', 'sensor.hallway_office_bedroom_presence_sensor_pir', 'sensor.master_bedroom_window_presence_sensor_occupancy', 'sensor.master_bedroom_window_presence_sensor_pir'], 'room_name': 'Master Bedroom'}
2025-12-08 21:09:34,945 - custom_components.presence_based_lighting.config_flow - DEBUG - Loading existing entities: [{'automation_mode': 'automatic', 'disable_on_external_control': True, 'entity_id': 'light.master_bedroom', 'initial_presence_allowed': True, 'manual_disable_states': ['off'], 'presence_cleared_service': 'turn_off', 'presence_cleared_state': 'off', 'presence_detected_service': 'turn_on', 'presence_detected_state': 'on', 'require_occupancy_for_detected': False, 'require_vacancy_for_cleared': False, 'respect_presence_allowed': True, 'rlc_tracking_entity': 'sensor.master_bedroom_lights', 'use_interceptor': True}, {'automation_mode': 'presence_lock', 'disable_on_external_control': False, 'entity_id': 'cover.master_bedroom_vents', 'initial_presence_allowed': True, 'manual_disable_states': [], 'presence_cleared_service': 'close_cover_tilt', 'presence_cleared_state': 'off', 'presence_detected_service': 'open_cover_tilt', 'presence_detected_state': 'on', 'require_occupancy_for_detected': True, 'require_vacancy_for_cleared': True, 'respect_presence_allowed': True, 'use_interceptor': True}]
2025-12-08 21:09:34,945 - custom_components.presence_based_lighting.config_flow - DEBUG - OptionsFlow.__init__ complete. Loaded 2 entities
2025-12-08 21:09:34,945 - custom_components.presence_based_lighting.config_flow - DEBUG - async_step_init called with user_input: None
2025-12-08 21:09:35,532 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: on -> off
2025-12-08 21:09:35,533 - custom_components.presence_based_lighting - DEBUG - Presence cleared, starting off timer
2025-12-08 21:09:35,533 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: on -> off
2025-12-08 21:09:35,533 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_occupancy previous_valid_state changed: on -> off
2025-12-08 21:09:35,533 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.hallway with delay 0 seconds
2025-12-08 21:09:35,534 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.hallway, clearing sensors clear, applying cleared action
2025-12-08 21:09:35,534 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_off for entity light.hallway
2025-12-08 21:09:35,535 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.hallway
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: off -> on
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.hallway
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: off -> on
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.office_light
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_pir previous_valid_state changed: off -> on
2025-12-08 21:10:08,432 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:08,433 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.master_bedroom
2025-12-08 21:10:08,435 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.office_light
2025-12-08 21:10:08,435 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:08,435 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.office_light with delay 2 seconds
2025-12-08 21:10:08,435 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.hallway
2025-12-08 21:10:08,435 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.hallway with delay 0 seconds
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.hallway, clearing sensors clear, applying cleared action
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Entity light.hallway already in target state off
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.master_bedroom
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,436 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,721 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: off -> on
2025-12-08 21:10:08,721 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:08,721 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.hallway
2025-12-08 21:10:08,721 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: off -> on
2025-12-08 21:10:08,721 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:08,721 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.office_light
2025-12-08 21:10:08,723 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_occupancy previous_valid_state changed: off -> on
2025-12-08 21:10:08,723 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:08,723 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_on for entity light.master_bedroom
2025-12-08 21:10:08,723 - custom_components.presence_based_lighting - DEBUG - Off timer cancelled for light.office_light
2025-12-08 21:10:08,726 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.office_light
2025-12-08 21:10:08,726 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:08,726 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.office_light with delay 2 seconds
2025-12-08 21:10:08,726 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.hallway
2025-12-08 21:10:08,726 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:08,726 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.hallway with delay 0 seconds
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.hallway, but clearing sensors not all clear
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.master_bedroom
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:08,727 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:09,205 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:10:09,206 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:09,206 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.master_bedroom with delay 2 seconds
2025-12-08 21:10:09,206 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:10:10,727 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.office_light, but clearing sensors not all clear
2025-12-08 21:10:11,015 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:10:11,015 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:11,015 - custom_components.presence_based_lighting - DEBUG - Off timer cancelled for light.master_bedroom
2025-12-08 21:10:11,015 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.master_bedroom with delay 2 seconds
2025-12-08 21:10:11,015 - custom_components.presence_based_lighting - DEBUG - Off timer cancelled for cover.master_bedroom_vents
2025-12-08 21:10:11,015 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:10:13,016 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.master_bedroom, clearing sensors clear, applying cleared action
2025-12-08 21:10:13,017 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_off for entity light.master_bedroom
2025-12-08 21:10:13,017 - custom_components.presence_based_lighting - DEBUG - Off timer expired for cover.master_bedroom_vents, clearing sensors clear, applying cleared action
2025-12-08 21:10:13,017 - custom_components.presence_based_lighting - DEBUG - Calling service cover.close_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:10:13,017 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,017 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,018 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:13,020 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.master_bedroom
2025-12-08 21:10:13,156 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:10:22,060 - custom_components.presence_based_lighting - DEBUG - Using RLC tracking entity sensor.master_bedroom_lights for light.master_bedroom: effective state = off (raw state = off)
2025-12-08 21:10:22,060 - custom_components.presence_based_lighting - DEBUG - Manual control: light.master_bedroom set to off (in disable list), pausing automation
2025-12-08 21:10:29,824 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_pir previous_valid_state changed: off -> on
2025-12-08 21:10:29,824 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:29,824 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:10:29,825 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,825 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,825 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,825 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,825 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,825 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,825 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,826 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,826 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,826 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:29,957 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:10:29,957 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:29,957 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:10:30,265 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_occupancy previous_valid_state changed: off -> on
2025-12-08 21:10:30,265 - custom_components.presence_based_lighting - DEBUG - Presence detected, cancelling timers
2025-12-08 21:10:30,265 - custom_components.presence_based_lighting - DEBUG - Calling service cover.open_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:10:30,265 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,265 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:30,266 - custom_components.presence_based_lighting - DEBUG - Off timer cancelled for cover.master_bedroom_vents
2025-12-08 21:10:30,389 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents
2025-12-08 21:10:30,389 - custom_components.presence_based_lighting - DEBUG - Starting off timer after presence detected
2025-12-08 21:10:30,389 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:10:32,390 - custom_components.presence_based_lighting - DEBUG - Off timer expired for cover.master_bedroom_vents, but clearing sensors not all clear
2025-12-08 21:10:50,800 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_occupancy previous_valid_state changed: on -> off
2025-12-08 21:10:50,800 - custom_components.presence_based_lighting - DEBUG - Presence cleared, starting off timer
2025-12-08 21:10:50,800 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.master_bedroom_window_presence_sensor_pir previous_valid_state changed: on -> off
2025-12-08 21:10:50,800 - custom_components.presence_based_lighting - DEBUG - Presence cleared, starting off timer
2025-12-08 21:10:50,800 - custom_components.presence_based_lighting - DEBUG - Starting off timer for cover.master_bedroom_vents with delay 2 seconds
2025-12-08 21:10:52,801 - custom_components.presence_based_lighting - DEBUG - Off timer expired for cover.master_bedroom_vents, clearing sensors clear, applying cleared action
2025-12-08 21:10:52,801 - custom_components.presence_based_lighting - DEBUG - Calling service cover.close_cover_tilt for entity cover.master_bedroom_vents
2025-12-08 21:10:52,801 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:52,802 - custom_components.presence_based_lighting - DEBUG - Skipping non-string entity_id: {'cover.master_bedroom_vent_2_vent', 'cover.master_bedroom_vent_3_vent'} (type: <class 'set'>)
2025-12-08 21:10:55,456 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: on -> off
2025-12-08 21:10:55,457 - custom_components.presence_based_lighting - DEBUG - Presence cleared, starting off timer
2025-12-08 21:10:55,457 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_presence: on -> off
2025-12-08 21:10:55,457 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: on -> off
2025-12-08 21:10:55,457 - custom_components.presence_based_lighting - DEBUG - Presence change detected on binary_sensor.hallway_office_presence_sensor_pir_detection: on -> off
2025-12-08 21:10:55,457 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_occupancy previous_valid_state changed: on -> off
2025-12-08 21:10:55,457 - custom_components.presence_based_lighting - DEBUG - Starting off timer for light.hallway with delay 0 seconds
2025-12-08 21:10:55,458 - custom_components.presence_based_lighting - DEBUG - RLC sensor sensor.hallway_office_bedroom_presence_sensor_pir previous_valid_state changed: on -> off
2025-12-08 21:10:55,458 - custom_components.presence_based_lighting - DEBUG - Off timer expired for light.hallway, clearing sensors clear, applying cleared action
2025-12-08 21:10:55,458 - custom_components.presence_based_lighting - DEBUG - Calling service light.turn_off for entity light.hallway
2025-12-08 21:10:55,461 - custom_components.presence_based_lighting - DEBUG - Service call completed for light.hallway
2025-12-08 21:10:55,629 - custom_components.presence_based_lighting - DEBUG - Service call completed for cover.master_bedroom_vents